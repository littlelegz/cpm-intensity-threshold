(()=>{"use strict";var t={4592:function(t,e,r){var a=r(5893),n=r(7294),i=r(745),s=r(819),l=r(5555),o=r(4335),c=r(4640);let d=t=>{let{data:e}=t,r=(0,n.useRef)(),i={top:20,right:20,bottom:40,left:40},[o,d]=(0,n.useState)(null);return(0,n.useEffect)(()=>{if(!e)return;c.Ys(r.current).selectAll("*").remove();let t=c.Ys("body").append("div").attr("class","tooltip").style("opacity",0),a=c.BYU().domain([c.VV$(e,t=>t.cpm)-10,1.1*c.Fp7(e,t=>t.cpm)]).range([i.left,800-i.right]),n=c.BYU().domain([c.VV$(e,t=>t.intensity)-.1,1.1*c.Fp7(e,t=>t.intensity)]).range([600-i.bottom,i.top]),s=c.Ys(r.current).attr("width",800).attr("height",600),l=c.BYU().domain([0,c.Fp7(e,t=>t.cpm)/(c.Fp7(e,t=>t.cpm)/5)]).range([0,i.top]),o=c.BYU().domain([0,c.Fp7(e,t=>t.intensity)/(c.Fp7(e,t=>t.intensity)/8)]).range([0,i.right]),p=c.KXr().value(t=>t.cpm).domain(a.domain()).thresholds(a.ticks(30)),h=c.KXr().value(t=>t.intensity).domain(n.domain()).thresholds(n.ticks(30)),x=p(e),y=h(e);s.append("g").attr("transform",`translate(0, ${i.top})`).append("path").datum(x).attr("fill","#999").attr("opacity",.5).attr("d",c.SOn().x(t=>a(t.x0+(t.x1-t.x0)/2)).y0(0).y1(t=>-l(t.length)).curve(c.$0Z)),s.append("g").attr("transform",`translate(${800-i.right}, 0)`).append("path").datum(y).attr("fill","#999").attr("opacity",.5).attr("d",c.SOn().y(t=>n(t.x0+(t.x1-t.x0)/10)).x0(0).x1(t=>o(t.length)).curve(c.$0Z));let u=s.append("g").attr("class","reference-crosshair").style("display","none");u.append("line").attr("class","reference-vertical").attr("y1",i.top).attr("y2",600-i.bottom).attr("stroke","#0066cc").attr("stroke-width",1).attr("stroke-dasharray","3,3"),u.append("line").attr("class","reference-horizontal").attr("x1",i.left).attr("x2",800-i.right).attr("stroke","#0066cc").attr("stroke-width",1).attr("stroke-dasharray","3,3"),s.append("g").attr("transform",`translate(0,${600-i.bottom})`).call(c.LLu(a)).append("text").attr("x",800-i.right).attr("y",-10).attr("fill","black").text("CPM"),s.append("g").attr("transform",`translate(${i.left},0)`).call(c.y4O(n)).append("text").attr("transform","rotate(-90)").attr("y",15).attr("fill","black").text("Intensity");let f=s.append("g").attr("class","crosshair").style("display","none");function m(t,e){if(t>=i.left&&t<=800-i.right&&e>=i.top&&e<=600-i.bottom){f.style("display",null),f.select(".crosshair-vertical").attr("x1",t).attr("x2",t),f.select(".crosshair-horizontal").attr("y1",e).attr("y2",e);let r=a.invert(t).toFixed(2),i=n.invert(e).toFixed(2);f.select(".crosshair-x-label").attr("x",t).text(`CPM: ${r}`),f.select(".crosshair-y-label").attr("y",e).text(`Intensity: ${i}`)}}f.append("line").attr("class","crosshair-vertical").attr("y1",i.top).attr("y2",600-i.bottom).attr("stroke","#666").attr("stroke-width",1).attr("stroke-dasharray","3,3"),f.append("line").attr("class","crosshair-horizontal").attr("x1",i.left).attr("x2",800-i.right).attr("stroke","#666").attr("stroke-width",1).attr("stroke-dasharray","3,3"),f.append("text").attr("class","crosshair-x-label").attr("text-anchor","middle").attr("dy","1em").attr("y",600-i.bottom+20),f.append("text").attr("class","crosshair-y-label").attr("text-anchor","end").attr("dx","-0.5em").attr("x",i.left-5),s.append("rect").attr("width",800-i.left-i.right).attr("height",600-i.top-i.bottom).attr("x",i.left).attr("y",i.top).attr("fill","none").attr("pointer-events","all").on("mousemove",function(t){if(!f.attr("manual-show")){let[e,r]=c.cx$(t);m(e,r)}}).on("mouseleave",function(){f.attr("manual-show")||f.style("display","none")}).on("click",function(t){let[e,r]=c.cx$(t);m(e,r),f.attr("manual-show",!0),f.style("display",null),u.style("display",null),u.select(".reference-vertical").attr("x1",e).attr("x2",e),u.select(".reference-horizontal").attr("y1",r).attr("y2",r),d({cpm:a.invert(e),intensity:n.invert(r)})}),s.selectAll("circle").data(e).join("circle").attr("cx",t=>a(t.cpm)).attr("cy",t=>n(t.intensity)).attr("r",3).attr("fill",t=>1===t.state?"#ff6b6b":"#4ecdc4").attr("opacity",.6).on("mouseover",function(e,r){let i=c.Ys(this);f.attr("manual-show",!0),m(a(r.cpm),n(r.intensity)),i.attr("r",5).attr("stroke","#000").attr("stroke-width",1),t.transition().duration(200).style("opacity",.9),t.html(r.gene).style("left",e.pageX+10+"px").style("top",e.pageY-10+"px")}).on("mouseout",function(){let e=c.Ys(this);f.attr("manual-show",null),f.style("display","none"),e.attr("r",3).attr("stroke",null),t.transition().duration(500).style("opacity",0)})},[e]),(0,a.jsxs)("div",{style:{display:"flex",flexDirection:"row",justifyContent:o?"space-between":"center",alignItems:"center"},children:[(0,a.jsx)("svg",{ref:r}),(0,a.jsx)("div",{children:(()=>{if(!o)return null;var t=0,n=0,i=0,p=0;e.forEach(e=>{e.cpm>o.cpm&&e.intensity>o.intensity?t++:e.cpm<=o.cpm&&e.intensity<=o.intensity?n++:e.cpm>o.cpm&&e.intensity<=o.intensity?i++:e.cpm<=o.cpm&&e.intensity>o.intensity&&p++});let h=(t+n)/(t+n+i+p),x=t/(t+i),y=t/(t+p),u=n/(n+i),f=i/(i+n),m=t/(t+p),v=(t*n-i*p)/Math.sqrt((t+i)*(t+p)*(n+i)*(n+p));return(0,a.jsxs)("div",{style:{padding:"20px",backgroundColor:"#f5f5f5",borderRadius:"4px",minWidth:"200px"},children:[(0,a.jsx)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"15px"},children:(0,a.jsx)(s.Z,{variant:"h5",children:"Threshold Metrics"})}),(0,a.jsxs)("div",{style:{marginBottom:"10px"},children:[(0,a.jsxs)("div",{children:["CPM: ",o.cpm.toFixed(2)]}),(0,a.jsxs)("div",{children:["Intensity: ",o.intensity.toFixed(2)]})]}),(0,a.jsxs)("div",{style:{marginTop:"10px"},children:[(0,a.jsxs)("div",{children:["TP: ",t]}),(0,a.jsxs)("div",{children:["TN: ",n]}),(0,a.jsxs)("div",{children:["FP: ",i]}),(0,a.jsxs)("div",{children:["FN: ",p]}),(0,a.jsxs)("div",{children:["Accuracy: ",(100*h).toFixed(2),"%"]}),(0,a.jsxs)("div",{children:["Precision: ",(100*x).toFixed(2),"%"]}),(0,a.jsxs)("div",{children:["Recall: ",(100*y).toFixed(2),"%"]}),(0,a.jsxs)("div",{children:["F1 Score: ",(x*y*2/(x+y)).toFixed(2)]}),(0,a.jsxs)("div",{children:["Specificity: ",(100*u).toFixed(2),"%"]}),(0,a.jsxs)("div",{children:["False Positive Rate: ",(100*f).toFixed(2),"%"]}),(0,a.jsxs)("div",{children:["True Positive Rate: ",(100*m).toFixed(2),"%"]}),(0,a.jsxs)("div",{children:["MCC: ",v.toFixed(2)]})]}),(0,a.jsx)("div",{style:{marginTop:"10px"},children:(0,a.jsx)(l.Z,{size:"small",variant:"outlined",color:"error",onClick:()=>{d(null),c.Ys(r.current).select(".reference-crosshair").style("display","none")},children:"Clear"})})]})})()})]})};i.createRoot(document.getElementById("root")).render((0,a.jsx)(n.StrictMode,{children:(0,a.jsx)(()=>{let[t,e]=(0,n.useState)(null);return(0,a.jsx)("div",{className:"content",children:(0,a.jsxs)(o.Z,{sx:{p:3},children:[(0,a.jsx)(s.Z,{variant:"h5",gutterBottom:!0,children:"Bob"}),(0,a.jsxs)(o.Z,{sx:{mb:3},children:[(0,a.jsx)("input",{accept:".txt,.tsv",style:{display:"none"},id:"raised-button-file",type:"file",onChange:t=>{let r=t.target.files[0];if(!r)return;let a=new FileReader;a.onload=t=>{let r=t.target.result.split("\n"),a=r[0].split("	"),n=r.slice(1).filter(t=>t.trim()).map(t=>{let e=t.split("	");return a.reduce((t,r,a)=>(t[r]="state"===r?parseInt(e[a]):"cpm"===r||"intensity"===r?parseFloat(e[a]):e[a],t),{})});e(n),console.log("Loaded data:",n.slice(0,5))},a.readAsText(r)}}),(0,a.jsx)("label",{htmlFor:"raised-button-file",children:(0,a.jsx)(l.Z,{variant:"contained",component:"span",children:"Upload Data"})})]}),!t&&(0,a.jsxs)(a.Fragment,{children:["Accepts .txt or .tsv files with the following columns: ",(0,a.jsx)("br",{}),(0,a.jsx)("strong",{children:"gene"}),", ",(0,a.jsx)("strong",{children:"cpm"}),", ",(0,a.jsx)("strong",{children:"intensity"}),", ",(0,a.jsx)("strong",{children:"state"}),(0,a.jsx)("br",{})]}),t&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(s.Z,{gutterBottom:!0,children:["Loaded ",t.length," genes"]}),(0,a.jsx)(d,{data:t})]})]})})},{})}))}},e={};function r(a){var n=e[a];if(void 0!==n)return n.exports;var i=e[a]={exports:{}};return t[a](i,i.exports,r),i.exports}r.m=t,(()=>{var t,e=Object.getPrototypeOf?t=>Object.getPrototypeOf(t):t=>t.__proto__;r.t=function(a,n){if(1&n&&(a=this(a)),8&n||"object"==typeof a&&a&&(4&n&&a.__esModule||16&n&&"function"==typeof a.then))return a;var i=Object.create(null);r.r(i);var s={};t=t||[null,e({}),e([]),e(e)];for(var l=2&n&&a;"object"==typeof l&&!~t.indexOf(l);l=e(l))Object.getOwnPropertyNames(l).forEach(t=>{s[t]=()=>a[t]});return s.default=()=>a,r.d(i,s),i}})(),r.d=(t,e)=>{for(var a in e)r.o(e,a)&&!r.o(t,a)&&Object.defineProperty(t,a,{enumerable:!0,get:e[a]})},r.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),r.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},(()=>{var t=[];r.O=(e,a,n,i)=>{if(a){i=i||0;for(var s=t.length;s>0&&t[s-1][2]>i;s--)t[s]=t[s-1];t[s]=[a,n,i];return}for(var l=1/0,s=0;s<t.length;s++){for(var[a,n,i]=t[s],o=!0,c=0;c<a.length;c++)(!1&i||l>=i)&&Object.keys(r.O).every(t=>r.O[t](a[c]))?a.splice(c--,1):(o=!1,i<l&&(l=i));if(o){t.splice(s--,1);var d=n();void 0!==d&&(e=d)}}return e}})(),r.rv=()=>"1.3.0",(()=>{var t={980:0};r.O.j=e=>0===t[e];var e=(e,a)=>{var n,i,[s,l,o]=a,c=0;if(s.some(e=>0!==t[e])){for(n in l)r.o(l,n)&&(r.m[n]=l[n]);if(o)var d=o(r)}for(e&&e(a);c<s.length;c++)i=s[c],r.o(t,i)&&t[i]&&t[i][0](),t[i]=0;return r.O(d)},a=self.webpackChunkvisualization=self.webpackChunkvisualization||[];a.forEach(e.bind(null,0)),a.push=e.bind(null,a.push.bind(a))})(),r.ruid="bundler=rspack@1.3.0";var a=r.O(void 0,["361","813"],function(){return r(4592)});a=r.O(a)})();